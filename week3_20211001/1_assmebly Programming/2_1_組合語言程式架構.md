
# 組合語言程式架構 

- 1.保留字(reserved word)
- 2.標誌符號(identifier)|【標籤label】
  - 標籤(label) 可以用來劃分代碼，以表達某種與程式設計或設計有關的想法。
  - 不僅可以令代碼讀起來更加清晰，而且有的時候還能夠幫助開發者實現跳轉或迴圈等功能，使得程式可以跳到標籤所標識的這個地方。
  - 標籤的寫法是在識別字後面跟一個冒號：
  
    identifier:
  
  - 【標籤label】可單獨一行也可以與指令寫在同一行。
  - GAS 與NASM 的abel用在.text 段裡組
  - MASM 的abel寫在.code 段裡則不區分大小寫
  - 使用【標籤label】實作迴圈程式


- 3.區段(section | segment)

|NASM|GAS|說明|
|------|------|---------|
|SECTION .bss| .bss|未初始化的變數 |
|SECTION .data |．data | 義的變數都必須予以初始化(必須具備初始值)|
|SECTION .text | .text| 可執行的程式碼/指令|


- 4.組合器專屬命令(Assembler Directives)
  - 不同組合器有其差異的組合器專屬命令(Assembler Directives)
  - gas(as) ==> https://ftp.gnu.org/old-gnu/Manuals/gas-2.9.1/html_chapter/as_7.html
  - nasm ==> https://www.csie.ntu.edu.tw/~comp03/nasm/nasmdoc5.html

- 5.指令(instruction)
  - 指令是程式中的可執行語句  mov,add
  - 指令由兩個基本部分組成，語法：mnemonic [operands]
    - mnemonic(助記符)是指令名稱，開發者用它來指代某個架構所支援的一套指集裡的一條指令。
    - mnemonic(助記符)通常是個縮寫形式或首字母縮略形式的詞，實際上也可以認為是數位形式的操作碼所對應的英語寫法
    - mov eax, 35
    - mov ebx, 52
    - add eax, ebx

- 注釋(comment)
  - 組合語言的注釋可以分成兩種：單行注釋與多行注釋。
  - GAS 的單行注釋以井號（＃）開頭
  - MASM 及NASM 的單行注釋以分號（；）開頭。
  - 注釋可以單獨佔據一行也可以寫在某行代碼的後面。
  - 多行注釋只能在GAS 與MASM 中用。
  - GAS 的多行注釋與C 語言風格的多行注釋一樣，也是用／＊開頭，用＊／結尾，而且可以出現在代碼中的任意位置。
  - MASM 的多行注釋必須與其他代碼分別寫在不同的行裡，而且要由四部分組成： COMMENT 、起始字元、注釋文本、終止字元。
    - 起始字元與終止字元必須採用同一種字元，而且要注意不能與注釋文本中的任何一個字元相同（否則注釋就會提前結束）。
    - MASM 的多行注釋習慣上採用感嘆號(!)作為起、止字元。



# [範例來源](https://github.com/brianrhall/Assembly/blob/master/Chapter_3/Program%203.1/x86)

# nasm組合語言程式架構
```
; Program 3.1
; Sample Assembly Program - NASM (32-bit)
; Copyright (c) 2017 Hall & Slonka

SECTION .data
sum: DD 0

SECTION .text
global _main
_main:
mov eax, 25
mov ebx, 50
add eax, ebx
mov DWORD [sum], eax

mov eax, 1
mov ebx, 0
int 80h
```
# gas組合語言程式架構
```
.data
sum: .long 0

.text
.globl _main
_main:
movl $25, %eax
movl $50, %ebx
addl %ebx, %eax
movl %eax, sum

movl $1, %eax
movl $0, %ebx
int $0x80
.end
```
