# 計算機系統
- [x86(32位元)計算機系統](#x86(32位元)計算機系統 )
- [x86-64計算機系統](#x86-64計算機系統 )


## [Instruction set architecture(ISA)指令集架構](https://en.wikipedia.org/wiki/Instruction_set_architecture) [[中文說明]](https://zh.wikipedia.org/wiki/%E6%8C%87%E4%BB%A4%E9%9B%86%E6%9E%B6%E6%A7%8B)
- 指令集架構又稱指令集或指令集體系，是電腦架構中與程式設計有關的部分，包含了基本資料類型，指令集，暫存器，定址模式，儲存體系，中斷，異常處理以及外部I/O。
- 指令集架構包含一系列的opcode即操作碼（機器語言），以及由特定處理器執行的基本命令。
- 不同的處理器「家族」——例如Intel IA-32和x86-64、IBM/Freescale Power和ARM處理器家族——有不同的指令集架構。
- 指令集體系與微架構（一套用於執行指令集的微處理器設計方法）不同。使用不同微架構的電腦可以共享一種指令集。例如，Intel的Pentium和AMD的AMD Athlon，兩者幾乎採用相同版本的x86指令集體系，但是兩者在內部設計上有本質的區別。

- 指令集的分類
  - 複雜指令集電腦complex instruction set computer (CISC)包含許多應用程式中很少使用的特定指令，由此產生的缺陷是指令長度不固定。 x86架構微處理器與x86-64架構微處理器
  - 精簡指令集電腦reduced instruction set computer (RISC)通過只執行在程式中經常使用的指令來簡化處理器的結構，而特殊操作則以子程式的方式實現，它們的特殊使用通過處理器額外的執行時間來彌補。ARM架構
  - 理論上的重要類型還包括最小指令集電腦與單指令集電腦，但都未用作商業處理器。
  - 另外一種衍生類型是[超長指令字 very long instruction word (VLIW)] ，處理器接受許多經過編碼的指令並通過檢索提取出一個指令字並執行。

- 機器碼 Machine language is built up from discrete statements or instructions. 
- On the processing architecture, a given instruction may specify:
  - opcode (the instruction to be performed) e.g. add, copy, test
  - any explicit operands:
    - registers  ==> 用於算術運算，定址或者控制功能的特定暫存器
    - literal/constant values ==> 特定儲存空間的位址或偏移量；
    - addressing modes used to access memory ==> 用於解譯運算元的特定定址模式

## [Intel instruction set architecture (ISA)](https://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-instruction-set-reference-manual-325383.pdf)
 
 how to retrieve and store data
 
## addressing定址法: how to address the data in memory
- Sequential addressing
  - The instruction pointer (IP) register (IP for 32-bit systems and RIP for 64-bit) contains the address of the instruction following the one being currently executed. 
  - The instruction pointer is set to the next instruction automatically by the CPU.

- Direct addressing
  - address to be directly included in the instruction is an operand. 
  - 範例 call/jmp. 
  - Most of Windows, executables are loaded at address 0x00400000 with the first section, which is by default the code section being loaded at address 0x00401000
  - The register call, where the target address is stored in a register:
    - lea rax, [my_proc]
    - call rax
  
  - Via an immediate address
  - Via an address stored in a register

- Indirect addressing
 - the address is somewhere in there, but is not used directly. 
 - Instead, it is referenced by a pointer, which may be a register or certain base address (immediate address)
   - Via an address pointed by immediate
   - Via an address pointed by a register
- Base relative addressing
   - Base + index
   - Base + index * scale
- IP/RIP-based addressing
- Far pointers


## x86(32位元)計算機系統

- register
- addressing定址法

## x86-64計算機系統

- register
- addressing定址法

## 網路資源
- [Intel® 64 and IA-32 Architectures Software Developer Manuals](https://software.intel.com/content/www/us/en/develop/articles/intel-sdm.html)
- [COMPUTER SYSTEMS ORGANIZATION資源豐富的課程](https://cs.lmu.edu/~ray/classes/sp/)
   - [x86 Architecture Overview](https://cs.lmu.edu/~ray/notes/x86overview/)
   - [NASM Tutorial](https://cs.lmu.edu/~ray/notes/nasmtutorial/)
